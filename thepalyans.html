<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Palyan Family</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #08080a;
    --surface: rgba(255,255,255,0.025);
    --border: rgba(255,255,255,0.06);
    --text: #ccc;
    --text-dim: #666;
    --text-faint: #444;
    --gold: #D4A574;
    --tamara: #E8B4B8;
    --lady: #7DD3A8;
    --roman: #93A8E8;
    --kris: #C9A84C;
    --lily: #C4A8E8;
    --spartak: #4ECDC4;
    --red: #EF4444;
    --green: #34D399;
    --mono: 'JetBrains Mono', monospace;
    --body: 'DM Sans', -apple-system, sans-serif;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }
  body {
    font-family: var(--body);
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  .container { max-width: 720px; margin: 0 auto; padding: 28px 20px 80px; }

  /* HEADER */
  .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 32px; }
  .logo { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
  .logo-mark {
    width: 32px; height: 32px; border-radius: 8px;
    background: linear-gradient(135deg, var(--gold), #B8845A);
    display: flex; align-items: center; justify-content: center;
    font-weight: 700; font-size: 15px; color: #fff;
  }
  .logo-text { font-size: 10px; color: var(--text-faint); font-family: var(--mono); letter-spacing: 0.1em; text-transform: uppercase; }
  .greeting { font-size: 24px; font-weight: 400; color: #fff; letter-spacing: -0.01em; }
  .clock { text-align: right; font-family: var(--mono); font-size: 12px; }
  .clock-date { color: var(--text-dim); margin-bottom: 2px; }
  .clock-time { color: var(--gold); font-weight: 500; }
  .pulse-dot {
    display: inline-block; width: 6px; height: 6px; border-radius: 50%;
    background: var(--green); margin-right: 6px;
    animation: pulse 2s ease-in-out infinite;
  }
  @keyframes pulse { 0%,100% { opacity: 1; box-shadow: 0 0 0 0 rgba(52,211,153,0.4); } 50% { opacity: 0.6; box-shadow: 0 0 0 6px rgba(52,211,153,0); } }
  .live-tag { font-size: 10px; color: var(--green); font-family: var(--mono); font-weight: 500; }

  /* NAV TABS */
  .nav { display: flex; gap: 4px; margin-bottom: 28px; overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 4px; }
  .nav::-webkit-scrollbar { display: none; }
  .nav-btn {
    font-family: var(--body); font-size: 12px; font-weight: 500;
    padding: 8px 14px; border-radius: 8px; border: 1px solid transparent;
    background: transparent; color: var(--text-dim); cursor: pointer;
    white-space: nowrap; transition: all 0.2s;
  }
  .nav-btn:hover { color: var(--text); background: var(--surface); }
  .nav-btn.active { color: var(--gold); background: rgba(212,165,116,0.08); border-color: rgba(212,165,116,0.15); }

  /* SECTIONS */
  .section { display: none; animation: fadeIn 0.25s ease; }
  .section.visible { display: block; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }

  .section-title {
    font-size: 11px; font-weight: 600; color: var(--text-faint);
    font-family: var(--mono); text-transform: uppercase; letter-spacing: 0.08em;
    margin-bottom: 12px; display: flex; align-items: center; gap: 8px;
  }
  .section-title .dot { width: 6px; height: 6px; border-radius: 50%; }

  /* CARDS */
  .card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 16px 18px; margin-bottom: 10px;
  }
  .card-accent { border-left: 3px solid; padding-left: 16px; }

  /* STAT ROW */
  .stat-row { display: flex; gap: 10px; margin-bottom: 20px; }
  .stat-box {
    flex: 1; background: var(--surface); border: 1px solid var(--border);
    border-radius: 10px; padding: 14px 12px; text-align: center;
  }
  .stat-num { font-size: 28px; font-weight: 300; line-height: 1; margin-bottom: 2px; }
  .stat-label { font-size: 10px; color: var(--text-dim); }

  /* LIST ITEMS */
  .list-item {
    display: flex; gap: 12px; align-items: flex-start;
    padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.03);
  }
  .list-item:last-child { border-bottom: none; }
  .list-time { font-size: 11px; color: var(--text-faint); font-family: var(--mono); min-width: 60px; flex-shrink: 0; }
  .list-text { font-size: 13px; color: var(--text); line-height: 1.5; }
  .list-sub { font-size: 11px; color: var(--text-dim); margin-top: 2px; }

  /* TAGS */
  .tag {
    font-size: 9px; font-weight: 600; font-family: var(--mono);
    padding: 2px 7px; border-radius: 4px; text-transform: uppercase;
    letter-spacing: 0.04em; display: inline-block;
  }
  .tag-green { color: var(--green); background: rgba(52,211,153,0.1); }
  .tag-gold { color: var(--gold); background: rgba(212,165,116,0.1); }
  .tag-red { color: var(--red); background: rgba(239,68,68,0.1); }
  .tag-blue { color: var(--roman); background: rgba(147,168,232,0.1); }
  .tag-teal { color: var(--spartak); background: rgba(78,205,196,0.1); }

  /* BRIEFING BLOCKS */
  .brief-block { margin-bottom: 16px; }
  .brief-label {
    font-size: 10px; font-weight: 600; font-family: var(--mono);
    text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 8px;
  }
  .brief-item {
    font-size: 13px; color: #999; line-height: 1.6; margin-bottom: 6px;
    padding-left: 14px; border-left: 2px solid;
  }
  .brief-rec {
    background: rgba(232,180,184,0.05); border: 1px solid rgba(232,180,184,0.1);
    border-radius: 10px; padding: 14px 16px;
  }
  .brief-rec-label { font-size: 10px; font-weight: 600; color: var(--tamara); font-family: var(--mono); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 6px; }
  .brief-rec-text { font-size: 13px; color: var(--text); line-height: 1.6; }

  /* FOOTER */
  .footer {
    margin-top: 40px; padding-top: 16px; border-top: 1px solid var(--border);
    text-align: center; font-size: 10px; color: var(--text-faint); font-family: var(--mono);
  }
  .last-updated { font-size: 10px; color: var(--text-faint); font-family: var(--mono); margin-bottom: 20px; }

  /* PROGRESS BAR */
  .progress-bar { height: 4px; background: rgba(255,255,255,0.06); border-radius: 2px; overflow: hidden; margin-top: 6px; }
  .progress-fill { height: 100%; border-radius: 2px; transition: width 0.6s ease; }

  /* RESPONSIVE */
  @media (max-width: 480px) {
    .container { padding: 20px 16px 60px; }
    .greeting { font-size: 20px; }
    .stat-num { font-size: 22px; }
    .stat-row { gap: 6px; }
    .stat-box { padding: 10px 8px; }
    .nav-btn { padding: 7px 11px; font-size: 11px; }
  }
</style>
</head>
<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div>
      <div class="logo">
        <div class="logo-mark">P</div>
        <span class="logo-text">The Palyan Family</span>
      </div>
      <div class="greeting" id="greeting">Good evening, Arthur</div>
    </div>
    <div class="clock">
      <div class="clock-date" id="clock-date"></div>
      <div class="clock-time" id="clock-time"></div>
      <div style="margin-top:4px"><span class="pulse-dot"></span><span class="live-tag" id="live-status">LIVE</span></div>
    </div>
  </div>

  <div class="last-updated" id="last-updated">Updating...</div>

  <!-- NAV -->
  <div class="nav" id="nav">
    <button class="nav-btn active" data-tab="overview">Overview</button>
    <button class="nav-btn" data-tab="tamara">üè† Tamara</button>
    <button class="nav-btn" data-tab="lady">üêï Lady</button>
    <button class="nav-btn" data-tab="lily">üå∏ Lily</button>
    <button class="nav-btn" data-tab="roman">‚≠ê Roman</button>
    <button class="nav-btn" data-tab="kris">ü¶Ö Kris</button>
    <button class="nav-btn" data-tab="spartak">üåç Spartak</button>
    <button class="nav-btn" data-tab="arthur-bot">üëë A-Bot</button>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê OVERVIEW ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section visible" id="tab-overview">
    <div class="stat-row" id="overview-stats">
      <div class="stat-box">
        <div class="stat-num" style="color:var(--gold)" id="stat-calls">--</div>
        <div class="stat-label">calls this week</div>
      </div>
      <div class="stat-box">
        <div class="stat-num" style="color:var(--lady)" id="stat-lady-set">0</div>
        <div class="stat-label">Lady set</div>
      </div>
      <div class="stat-box">
        <div class="stat-num" style="color:var(--roman)" id="stat-organic">--</div>
        <div class="stat-label">organic</div>
      </div>
      <div class="stat-box">
        <div class="stat-num" style="color:var(--green)" id="stat-family-online">7</div>
        <div class="stat-label">family online</div>
      </div>
    </div>

    <div class="section-title"><div class="dot" style="background:var(--gold)"></div>Today's Calls</div>
    <div id="overview-today-calls"><div class="card" style="color:var(--text-dim);font-size:13px">Loading calendar...</div></div>

    <div style="height:20px"></div>
    <div class="section-title"><div class="dot" style="background:var(--tamara)"></div>Tamara's Top Recommendation</div>
    <div id="overview-recommendation"><div class="card" style="color:var(--text-dim);font-size:13px">Waiting for briefing...</div></div>

    <div style="height:20px"></div>
    <div class="section-title"><div class="dot" style="background:var(--lady)"></div>Lady's Latest</div>
    <div id="overview-lady-latest"><div class="card" style="color:var(--text-dim);font-size:13px">Waiting for hunt report...</div></div>

    <div style="height:20px"></div>
    <div class="section-title"><div class="dot" style="background:var(--lily)"></div>Lily Today</div>
    <div id="overview-lily-latest"><div class="card" style="color:var(--text-dim);font-size:13px">Waiting for player data...</div></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TAMARA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" id="tab-tamara">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px">
      <span style="font-size:24px">üè†</span>
      <div>
        <div style="font-size:18px;font-weight:500;color:#fff">Tamara</div>
        <div style="font-size:12px;color:var(--tamara)">Supervisor ‚Äî Runs the House</div>
      </div>
    </div>

    <div class="brief-block">
      <div class="brief-label" style="color:var(--green)">‚óè What's Working</div>
      <div id="tamara-working"><div class="brief-item" style="border-color:rgba(52,211,153,0.2)">Loading...</div></div>
    </div>
    <div class="brief-block">
      <div class="brief-label" style="color:var(--red)">‚óè What's Not Working</div>
      <div id="tamara-not-working"><div class="brief-item" style="border-color:rgba(239,68,68,0.2)">Loading...</div></div>
    </div>
    <div class="brief-block">
      <div class="brief-rec">
        <div class="brief-rec-label">Tamara's Recommendation</div>
        <div class="brief-rec-text" id="tamara-recommendation">Loading...</div>
      </div>
    </div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--tamara)"></div>Family Reports Received</div>
    <div id="tamara-reports"><div class="card" style="color:var(--text-dim);font-size:13px">Waiting for family reports...</div></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LADY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" id="tab-lady">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px">
      <span style="font-size:24px">üêï</span>
      <div>
        <div style="font-size:18px;font-weight:500;color:#fff">Lady</div>
        <div style="font-size:12px;color:var(--lady)">Hunter ‚Äî Fills Arthur's Calendar</div>
      </div>
    </div>

    <div class="stat-row">
      <div class="stat-box"><div class="stat-num" style="color:var(--lady)" id="lady-forms">0</div><div class="stat-label">forms filled</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--lady)" id="lady-emails">0</div><div class="stat-label">emails sent</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--lady)" id="lady-meetings">0</div><div class="stat-label">meetings booked</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--lady)" id="lady-leads">0</div><div class="stat-label">leads found</div></div>
    </div>

    <div class="section-title"><div class="dot" style="background:var(--lady)"></div>Upcoming Work</div>
    <div id="lady-upcoming"><div class="card" style="color:var(--text-dim);font-size:13px">Loading work queue...</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--green)"></div>Completed Work</div>
    <div id="lady-completed"><div class="card" style="color:var(--text-dim);font-size:13px">No completed work yet</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--gold)"></div>Channels & Opportunities</div>
    <div id="lady-channels"><div class="card" style="color:var(--text-dim);font-size:13px">Loading channels...</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--kris)"></div>AI Partners & Resources Found</div>
    <div id="lady-partners"><div class="card" style="color:var(--text-dim);font-size:13px">No partners found yet</div></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LILY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" id="tab-lily">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px">
      <span style="font-size:24px">üå∏</span>
      <div>
        <div style="font-size:18px;font-weight:500;color:#fff">Lily</div>
        <div style="font-size:12px;color:var(--lily)">Player Engagement ‚Äî Accepts Everyone</div>
      </div>
    </div>

    <div class="stat-row">
      <div class="stat-box"><div class="stat-num" style="color:var(--lily)" id="lily-today">0</div><div class="stat-label">today</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--lily)" id="lily-week">0</div><div class="stat-label">this week</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--lily)" id="lily-deep">0</div><div class="stat-label">deep mode</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--gold)" id="lily-coaching">0</div><div class="stat-label">coaching ready</div></div>
    </div>

    <div class="section-title"><div class="dot" style="background:var(--lily)"></div>Latest Conversations</div>
    <div id="lily-conversations"><div class="card" style="color:var(--text-dim);font-size:13px">Loading conversations...</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--gold)"></div>Breakthroughs This Week</div>
    <div id="lily-breakthroughs"><div class="card" style="color:var(--text-dim);font-size:13px">Waiting for breakthrough reports...</div></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ROMAN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" id="tab-roman">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px">
      <span style="font-size:24px">‚≠ê</span>
      <div>
        <div style="font-size:18px;font-weight:500;color:#fff">Roman</div>
        <div style="font-size:12px;color:var(--roman)">Press & Credibility ‚Äî The Brightest Star</div>
      </div>
    </div>

    <div class="stat-row">
      <div class="stat-box"><div class="stat-num" style="color:var(--roman)" id="roman-releases">0</div><div class="stat-label">releases sent</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--roman)" id="roman-pickups">0</div><div class="stat-label">pickups</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--roman)" id="roman-testimonials">0</div><div class="stat-label">testimonials</div></div>
    </div>

    <div class="section-title"><div class="dot" style="background:var(--roman)"></div>Latest Press Release</div>
    <div id="roman-latest"><div class="card" style="color:var(--text-dim);font-size:13px">No press releases sent yet</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--gold)"></div>Next Up</div>
    <div id="roman-next"><div class="card" style="color:var(--text-dim);font-size:13px">Loading queue...</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--green)"></div>Credibility Stats</div>
    <div id="roman-stats"><div class="card" style="color:var(--text-dim);font-size:13px">Loading stats...</div></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê KRIS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" id="tab-kris">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px">
      <span style="font-size:24px">ü¶Ö</span>
      <div>
        <div style="font-size:18px;font-weight:500;color:#fff">Kris</div>
        <div style="font-size:12px;color:var(--kris)">Elder & Unity Builder ‚Äî Win-Win Only</div>
      </div>
    </div>

    <div class="section-title"><div class="dot" style="background:var(--green)"></div>Actions Taken</div>
    <div id="kris-actions"><div class="card" style="color:var(--text-dim);font-size:13px">No actions logged yet</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--kris)"></div>Upcoming Actions</div>
    <div id="kris-upcoming"><div class="card" style="color:var(--text-dim);font-size:13px">Loading queue...</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--gold)"></div>Results</div>
    <div id="kris-results"><div class="card" style="color:var(--text-dim);font-size:13px">Loading results...</div></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SPARTAK ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" id="tab-spartak">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px">
      <span style="font-size:24px">üåç</span>
      <div>
        <div style="font-size:18px;font-weight:500;color:#fff">Spartak</div>
        <div style="font-size:12px;color:var(--spartak)">Global Communicator ‚Äî Every Language</div>
      </div>
    </div>

    <div class="stat-row">
      <div class="stat-box"><div class="stat-num" style="color:var(--spartak)" id="spartak-total">6,854</div><div class="stat-label">total scenarios</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--spartak)" id="spartak-template">3,848</div><div class="stat-label">in template</div></div>
      <div class="stat-box"><div class="stat-num" style="color:var(--gold)" id="spartak-languages">0</div><div class="stat-label">full languages</div></div>
    </div>

    <div class="section-title"><div class="dot" style="background:var(--spartak)"></div>Languages In Progress</div>
    <div id="spartak-languages-list"></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--gold)"></div>Translation Requests</div>
    <div id="spartak-requests"><div class="card" style="color:var(--text-dim);font-size:13px">No new requests</div></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ARTHUR BOT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" id="tab-arthur-bot">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px">
      <span style="font-size:24px">üëë</span>
      <div>
        <div style="font-size:18px;font-weight:500;color:#fff">Arthur Bot + Claude</div>
        <div style="font-size:12px;color:var(--gold)">Operator ‚Äî Builds What the Family Needs</div>
      </div>
    </div>

    <div class="section-title"><div class="dot" style="background:var(--gold)"></div>Currently Working On</div>
    <div id="arthurbot-current"><div class="card" style="color:var(--text-dim);font-size:13px">No active task</div></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--text-faint)"></div>Work Queue</div>
    <div id="arthurbot-queue"></div>

    <div style="height:16px"></div>
    <div class="section-title"><div class="dot" style="background:var(--green)"></div>Completed</div>
    <div id="arthurbot-completed"><div class="card" style="color:var(--text-dim);font-size:13px">No completed tasks yet</div></div>
  </div>

  <!-- FOOTER -->
  <div class="footer">
    Not departments. Family. ¬∑ $252/mo ¬∑ 6,854 scenarios ¬∑ 175 countries
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// LIVE DATA ENGINE
// Polls VPS API every 30 seconds for real family data
// Falls back to baseline state when API unavailable
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const API_BASE = 'http://167.99.108.151:3460/family';
// Same endpoint, no fallback needed - VPS serves the data directly
// CORS headers required on VPS: Access-Control-Allow-Origin: *
const API_FALLBACK = 'http://167.99.108.151:3460/family';

let currentData = null;
let lastFetchTime = null;
let usesFallback = false;

// ‚îÄ‚îÄ CLOCK ‚îÄ‚îÄ
function updateClock() {
  const now = new Date();
  const h = now.getHours();
  const greeting = h < 12 ? 'Good morning' : h < 17 ? 'Good afternoon' : 'Good evening';
  document.getElementById('greeting').textContent = greeting + ', Arthur';
  document.getElementById('clock-date').textContent = now.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
  document.getElementById('clock-time').textContent = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
}
setInterval(updateClock, 1000);
updateClock();

// ‚îÄ‚îÄ TAB NAVIGATION ‚îÄ‚îÄ
document.getElementById('nav').addEventListener('click', (e) => {
  if (!e.target.classList.contains('nav-btn')) return;
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.section').forEach(s => s.classList.remove('visible'));
  e.target.classList.add('active');
  document.getElementById('tab-' + e.target.dataset.tab).classList.add('visible');
});

// ‚îÄ‚îÄ DATA FETCHING ‚îÄ‚îÄ
async function fetchData() {
  try {
    let resp;
    try {
      resp = await fetch(API_BASE + '/status', { signal: AbortSignal.timeout(5000) });
    } catch(e) {
      resp = await fetch(API_FALLBACK + '/status', { signal: AbortSignal.timeout(5000) });
      usesFallback = true;
    }
    if (resp.ok) {
      currentData = await resp.json();
      lastFetchTime = new Date();
      document.getElementById('live-status').textContent = 'LIVE';
      render(currentData);
    }
  } catch(e) {
    document.getElementById('live-status').textContent = 'OFFLINE';
    if (!currentData) renderBaseline();
  }
  const ts = lastFetchTime ? lastFetchTime.toLocaleTimeString('en-US', {hour:'2-digit',minute:'2-digit',second:'2-digit'}) : 'Waiting for VPS';
  document.getElementById('last-updated').textContent = lastFetchTime ? 'Updated: ' + ts : 'Baseline data \u00B7 VPS data feed not connected yet';
}

// ‚îÄ‚îÄ RENDER LIVE DATA ‚îÄ‚îÄ
function render(d) {
  // Overview stats
  if (d.calendar) {
    const total = d.calendar.thisWeek || 0;
    const ladySet = d.calendar.ladySet || 0;
    setText('stat-calls', total);
    setText('stat-lady-set', ladySet);
    setText('stat-organic', total - ladySet);
  }
  setText('stat-family-online', d.familyOnline || 7);

  // Today's calls
  if (d.calendar && d.calendar.today && d.calendar.today.length > 0) {
    setHTML('overview-today-calls', d.calendar.today.map(c =>
      `<div class="list-item">
        <div class="list-time">${esc(c.time)}</div>
        <div style="flex:1">
          <div class="list-text">${esc(c.name)}</div>
          ${c.note ? `<div class="list-sub">${esc(c.note)}</div>` : ''}
        </div>
        <span class="tag ${c.source==='lady'?'tag-green':'tag-gold'}">${c.source==='lady'?'LADY':'ORGANIC'}</span>
      </div>`
    ).join(''));
  }

  // Tamara
  if (d.tamara) {
    if (d.tamara.working) setHTML('tamara-working', d.tamara.working.map(t => `<div class="brief-item" style="border-color:rgba(52,211,153,0.2)">${esc(t)}</div>`).join(''));
    if (d.tamara.notWorking) setHTML('tamara-not-working', d.tamara.notWorking.map(t => `<div class="brief-item" style="border-color:rgba(239,68,68,0.2)">${esc(t)}</div>`).join(''));
    if (d.tamara.recommendation) setText('tamara-recommendation', d.tamara.recommendation);
    if (d.tamara.reports) setHTML('tamara-reports', d.tamara.reports.map(r => `<div class="card card-accent" style="border-color:${memberColor(r.from)}"><div style="font-size:11px;color:${memberColor(r.from)};font-weight:600;margin-bottom:4px">${esc(r.from)}</div><div class="list-text">${esc(r.text)}</div><div class="list-sub">${esc(r.time)}</div></div>`).join(''));
    setHTML('overview-recommendation', `<div class="brief-rec"><div class="brief-rec-label">Tamara Says</div><div class="brief-rec-text">${esc(d.tamara.recommendation || 'No recommendation yet')}</div></div>`);
  }

  // Lady
  if (d.lady) {
    setText('lady-forms', d.lady.formsFilled || 0);
    setText('lady-emails', d.lady.emailsSent || 0);
    setText('lady-meetings', d.lady.meetingsBooked || 0);
    setText('lady-leads', d.lady.leadsFound || 0);
    if (d.lady.upcoming) setHTML('lady-upcoming', d.lady.upcoming.map(t => taskCard(t, 'var(--lady)')).join(''));
    if (d.lady.completed) setHTML('lady-completed', d.lady.completed.map(t => taskCard(t, 'var(--green)')).join(''));
    if (d.lady.channels) setHTML('lady-channels', d.lady.channels.map(c => `<div class="card" style="display:flex;justify-content:space-between;align-items:center"><span class="list-text">${esc(c.name)}</span><span class="tag tag-green">${esc(c.status||'active')}</span></div>`).join(''));
    if (d.lady.partners) setHTML('lady-partners', d.lady.partners.map(p => `<div class="card"><div class="list-text">${esc(p.name)}</div><div class="list-sub">${esc(p.note||'')}</div></div>`).join(''));
    // overview
    const latestLady = d.lady.completed && d.lady.completed.length > 0 ? d.lady.completed[0] : (d.lady.upcoming && d.lady.upcoming[0]);
    if (latestLady) setHTML('overview-lady-latest', `<div class="card card-accent" style="border-color:var(--lady)"><div class="list-text">${esc(latestLady.title || latestLady.text || 'Working...')}</div><div class="list-sub">${esc(latestLady.time || '')}</div></div>`);
  }

  // Lily
  if (d.lily) {
    setText('lily-today', d.lily.today || 0);
    setText('lily-week', d.lily.week || 0);
    setText('lily-deep', d.lily.deepMode || 0);
    setText('lily-coaching', d.lily.coachingReady || 0);
    if (d.lily.conversations) setHTML('lily-conversations', d.lily.conversations.map(c => `<div class="card"><div style="display:flex;justify-content:space-between;margin-bottom:4px"><span class="list-text" style="font-weight:500">${esc(c.player||'Player')}</span><span class="tag ${c.mode==='deep'?'tag-gold':'tag-blue'}">${esc(c.mode||'slim')}</span></div><div class="list-sub">${esc(c.summary||'')}</div><div class="list-sub" style="margin-top:2px;color:var(--text-faint)">${esc(c.time||'')}</div></div>`).join(''));
    if (d.lily.breakthroughs) setHTML('lily-breakthroughs', d.lily.breakthroughs.map(b => `<div class="card card-accent" style="border-color:var(--lily)"><div class="list-text">${esc(b.text)}</div><div class="list-sub">${esc(b.time||'')}</div></div>`).join(''));
    setHTML('overview-lily-latest', `<div class="card card-accent" style="border-color:var(--lily)"><div style="display:flex;gap:16px"><div><span style="font-size:20px;color:var(--lily)">${d.lily.today||0}</span> <span class="list-sub">today</span></div><div><span style="font-size:20px;color:var(--lily)">${d.lily.week||0}</span> <span class="list-sub">this week</span></div><div><span style="font-size:20px;color:var(--gold)">${d.lily.coachingReady||0}</span> <span class="list-sub">coaching ready</span></div></div></div>`);
  }

  // Roman
  if (d.roman) {
    setText('roman-releases', d.roman.releasesSent || 0);
    setText('roman-pickups', d.roman.pickups || 0);
    setText('roman-testimonials', d.roman.testimonials || 0);
    if (d.roman.latest) setHTML('roman-latest', `<div class="card card-accent" style="border-color:var(--roman)"><div class="list-text" style="font-weight:500">${esc(d.roman.latest.title)}</div><div class="list-sub" style="margin-top:4px">${esc(d.roman.latest.summary||'')}</div><div class="list-sub">${esc(d.roman.latest.time||'')}</div></div>`);
    if (d.roman.next) setHTML('roman-next', `<div class="card"><div class="list-text">${esc(d.roman.next.title)}</div><div class="list-sub">${esc(d.roman.next.note||'')}</div></div>`);
    if (d.roman.credibility) setHTML('roman-stats', d.roman.credibility.map(s => `<div class="card" style="display:flex;justify-content:space-between"><span class="list-text">${esc(s.label)}</span><span style="color:var(--roman);font-family:var(--mono);font-size:13px;font-weight:500">${esc(s.value)}</span></div>`).join(''));
  }

  // Kris
  if (d.kris) {
    if (d.kris.actionsTaken) setHTML('kris-actions', d.kris.actionsTaken.map(a => `<div class="card card-accent" style="border-color:var(--kris)"><div class="list-text">${esc(a.text)}</div><div class="list-sub">${esc(a.time||'')}</div></div>`).join(''));
    if (d.kris.upcoming) setHTML('kris-upcoming', d.kris.upcoming.map(a => taskCard(a, 'var(--kris)')).join(''));
    if (d.kris.results) setHTML('kris-results', d.kris.results.map(r => `<div class="card"><div class="list-text">${esc(r.text)}</div><div class="list-sub">${esc(r.time||'')}</div></div>`).join(''));
  }

  // Spartak
  if (d.spartak) {
    setText('spartak-total', (d.spartak.totalScenarios || 6854).toLocaleString());
    setText('spartak-template', (d.spartak.templateReady || 3848).toLocaleString());
    setText('spartak-languages', d.spartak.fullLanguages || 0);
    if (d.spartak.inProgress) {
      setHTML('spartak-languages-list', d.spartak.inProgress.map(l => `<div class="card"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px"><span class="list-text" style="font-weight:500">${esc(l.language)}</span><span class="tag tag-teal">${esc(l.status||'in progress')}</span></div><div class="progress-bar"><div class="progress-fill" style="width:${l.percent||0}%;background:var(--spartak)"></div></div><div class="list-sub" style="margin-top:4px">${l.scenarios||0} / ${d.spartak.totalScenarios||6854} scenarios ¬∑ ${l.uiStrings||0} UI strings</div></div>`).join(''));
    }
    if (d.spartak.requests) setHTML('spartak-requests', d.spartak.requests.map(r => `<div class="card card-accent" style="border-color:var(--spartak)"><div class="list-text">${esc(r.language)} ‚Äî ${esc(r.from||'player')}</div><div class="list-sub">${esc(r.note||'')}</div></div>`).join(''));
  }

  // Arthur Bot
  if (d.arthurBot) {
    if (d.arthurBot.current) setHTML('arthurbot-current', `<div class="card card-accent" style="border-color:var(--gold)"><div class="list-text" style="font-weight:500">${esc(d.arthurBot.current.task)}</div><div class="list-sub">${esc(d.arthurBot.current.why||'')}</div><div class="list-sub" style="margin-top:4px;color:var(--gold)">${esc(d.arthurBot.current.status||'working...')}</div></div>`);
    if (d.arthurBot.queue) setHTML('arthurbot-queue', d.arthurBot.queue.map((t,i) => `<div class="list-item"><div style="width:22px;height:22px;border-radius:5px;background:var(--surface);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:10px;color:var(--text-dim);font-family:var(--mono);flex-shrink:0">${i+1}</div><div style="flex:1"><div class="list-text">${esc(t.task)}</div><div class="list-sub">${esc(t.why||'')}</div></div></div>`).join(''));
    if (d.arthurBot.completed) setHTML('arthurbot-completed', d.arthurBot.completed.map(t => `<div class="card" style="display:flex;justify-content:space-between;align-items:center"><span class="list-text">${esc(t.task)}</span><span class="tag tag-green">DONE</span></div>`).join(''));
  }
}

// ‚îÄ‚îÄ RENDER BASELINE (when API unavailable) ‚îÄ‚îÄ
function renderBaseline() {
  const baseline = {
    calendar: { thisWeek: 23, ladySet: 0, today: [
      { time: '10:00 AM', name: 'Kyron', source: 'organic' },
      { time: '10:30 AM', name: 'Sherma', source: 'organic' },
      { time: '11:00 AM', name: 'Kristy', source: 'organic' },
      { time: '1:00 PM', name: 'Luis', source: 'organic' },
      { time: '2:00 PM', name: 'Ramdy', source: 'organic' },
      { time: '3:00 PM', name: "Brahv'o", source: 'organic' },
    ] },
    familyOnline: 7,
    tamara: {
      working: [
        'Pipeline is real. 23+ calls from 6 channels.',
        'Game is the front door. It works.',
        'Max proxy: all bots on $200/mo flat.',
      ],
      notWorking: [
        'Zero calls from bots. All organic so far.',
        'Bots can talk but can\'t act autonomously yet.',
        'No revenue this month.',
      ],
      recommendation: 'Focus on your 23 calls this week. That\'s where revenue lives. Lady needs to produce her own pipeline by Friday.',
      reports: [],
    },
    lady: {
      formsFilled: 0, emailsSent: 0, meetingsBooked: 0, leadsFound: 0,
      upcoming: [{ title: 'Research LA rehab centers with wellness programs', time: 'Queued' }],
      completed: [],
      channels: [
        { name: 'Yelp ‚Äî LA to San Diego', status: 'planned' },
        { name: 'Google Maps ‚Äî local wellness', status: 'planned' },
        { name: 'Craigslist', status: 'organic producing' },
        { name: 'LinkedIn', status: 'organic producing' },
        { name: 'TikTok', status: 'organic producing' },
      ],
      partners: [],
    },
    lily: { today: 0, week: 0, deepMode: 0, coachingReady: 0, conversations: [], breakthroughs: [] },
    roman: { releasesSent: 0, pickups: 0, testimonials: 0, next: { title: 'Father of four builds AI company named after his family', note: 'Ready to send on Arthur\'s go' } },
    kris: { actionsTaken: [], upcoming: [{ title: 'Map existing music placements into growth strategy', time: 'Queued' }, { title: 'Identify win-win partnerships: music x self-development', time: 'Queued' }], results: [{ text: 'The Palyans on Apple Music, Spotify, and inside Level Up game', time: 'Already live' }] },
    spartak: {
      totalScenarios: 6854, templateReady: 3848, fullLanguages: 0,
      inProgress: [
        { language: 'Spanish', status: 'UI started', percent: 3, scenarios: 0, uiStrings: 196 },
        { language: 'Dutch', status: 'UI started', percent: 3, scenarios: 0, uiStrings: 180 },
      ],
      requests: [],
    },
    arthurBot: {
      current: null,
      queue: [
        { task: 'Build family data API on VPS (:3460)', why: 'This dashboard needs live data' },
        { task: 'Give Lady email + web search tools', why: 'She hunts but can\'t send outreach' },
        { task: 'Connect Calendly webhooks to Tamara', why: 'Auto-notify on bookings/cancels' },
        { task: 'Deploy thepalyans.html to GitHub Pages', why: 'Eyes from phone, anywhere' },
      ],
      completed: [
        { task: 'Deployed all 7 family bots via Max proxy' },
        { task: 'Shut down OpenClaw' },
        { task: 'Built dept-bot-template.js' },
        { task: 'Created v6 cron workers for Lady, Tamara, Roman, Kris' },
      ],
    },
  };
  render(baseline);
}

// ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ
function setText(id, val) { const el = document.getElementById(id); if (el) el.textContent = val; }
function setHTML(id, html) { const el = document.getElementById(id); if (el) el.innerHTML = html; }
function esc(s) { if (!s) return ''; const d = document.createElement('div'); d.textContent = String(s); return d.innerHTML; }
function memberColor(name) {
  const colors = { Tamara: 'var(--tamara)', Lady: 'var(--lady)', Roman: 'var(--roman)', Kris: 'var(--kris)', Lily: 'var(--lily)', Spartak: 'var(--spartak)', Arthur: 'var(--gold)' };
  return colors[name] || 'var(--text-dim)';
}
function taskCard(t, color) {
  return `<div class="card card-accent" style="border-color:${color}"><div class="list-text">${esc(t.title||t.text||'')}</div>${t.time ? `<div class="list-sub">${esc(t.time)}</div>` : ''}</div>`;
}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
renderBaseline(); // show baseline immediately
fetchData(); // then try live data
setInterval(fetchData, 30000); // poll every 30s
</script>
</body>
</html>
