<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Palyan Family Command Center</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x1F451;</text></svg>">
<style>body{margin:0;padding:0;background:#080808;}</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script type="text/babel">
const { useState, useEffect, useRef } = React;

// ═══════════════════════════════════════════════════════
// CONFIG - The only thing you ever edit. Everything else
// auto-calculates from this block.
// ═══════════════════════════════════════════════════════

const CONFIG = {
  runwayMonths: "3-6",
  currentMonthRevenue: 0,
  lifetimeRevenue: 1400,
  lifetimeClients: 2,
  apiCredits: { anthropic: 100, deepseek: 10, openrouter: 7 },
  costs: [
    { item: "Claude Max 20x", cost: 200 },
    { item: "Vercel Pro", cost: 20 },
    { item: "Calendly + Zoom", cost: 20 },
    { item: "DigitalOcean VPS", cost: 12 },
  ],
  totalScenarios: 6854,
  fullLanguages: 0,
  templateReady: 3848,
  uiLanguagesStarted: 2,
  vpsIP: "167.99.108.151",
  vpsRAM: "4GB",
};

// ═══════════════════════════════════════════════════════
// FAMILY - Change status when bots go live/offline.
// Infrastructure page auto-builds from processId/processMem.
// ═══════════════════════════════════════════════════════

const FAMILY = [
  {
    name: "Arthur", role: "CEO & Head of Family", emoji: "\u{1F451}", status: "online",
    telegram: "@MrPalyan_Bot", accent: "#D4A574",
    directive: "Show up for every human moment. Close every deal. Do the deep work nobody else can.",
    bio: "Founder of Levels of Self Academy. Best Life Coach California 2025. Created the Level Up game with " + CONFIG.totalScenarios + " scenarios across 7 levels of self-development. Father of four. The soul of everything.",
    processName: "arthur-bot", processId: 2, processPort: null, processMem: "79MB",
  },
  {
    name: "Tamara", role: "Supervisor", emoji: "\u{1F3E0}", status: "online",
    telegram: "@Tamara_Palyan_Bot", accent: "#E8B4B8",
    directive: "Run the house. Turn chaos into order. Arthur only hears what matters.",
    bio: "Named after Arthur's wife. The one who holds it all together. Morning briefs, evening summaries, routing leads, flagging problems. She turns a house into a home.",
    processName: "tamara-bot", processId: 6, processPort: null, processMem: "81MB",
  },
  {
    name: "Kris", role: "Elder & Unity Builder", emoji: "\u{1F985}", status: "online",
    telegram: "@Kris_Pbot", accent: "#C9A84C",
    directive: "Create the ultimate win-win. Include everyone. Eliminate fear. Build bridges between worlds.",
    bio: "Arthur's oldest brother. The elder of the Palyans. The Palyans music is already on Apple Music, Spotify, and inside the Level Up game itself. He creates unity where others see division, builds real-world partnerships, and includes everyone at the table. He provides exit strategies so nobody is afraid to start.",
    processName: "kris-bot", processId: 9, processPort: null, processMem: "74MB",
  },
  {
    name: "Lady", role: "Scheduling & Hunter", emoji: "\u{1F415}", status: "online",
    telegram: "@Lady_Dogbot", accent: "#7DD3A8",
    directive: "Fill Arthur's calendar. Every day. No excuses.",
    bio: "Named after the Palyan family dog. The hunter. The go-getter. She finds appointments, fills forms, discovers opportunities, and brings them home. Relentless but smart.",
    processName: "lady-bot", processId: 7, processPort: null, processMem: "72MB",
  },
  {
    name: "Roman", role: "Press & Credibility", emoji: "\u2B50", status: "online",
    telegram: "@Roman_Palyan_Bot", accent: "#93A8E8",
    directive: "Stack credibility so high that trust becomes inevitable.",
    bio: "Named after Arthur's 4-year-old son. The brightest star. He already mediates conflict at his age. His namesake handles press, testimonials, social content. He sees what's good and makes sure the world sees it too.",
    processName: "roman-bot", processId: 8, processPort: null, processMem: "61MB",
  },
  {
    name: "Lily", role: "Player Engagement", emoji: "\u{1F338}", status: "online",
    telegram: "@LevelsOfSelfBot", accent: "#C4A8E8",
    directive: "Accept everyone fully. Help them see their patterns. Never turn anyone away.",
    bio: "Named after Arthur's unborn daughter. His deepest legacy. She talks to every person who comes through. She accepts them, helps them with exercises, and creates breakthroughs. Already helping people worldwide before she's even born.",
    processName: "lily-telegram", processId: 5, processPort: null, processMem: "79MB",
    extraProcesses: [{ name: "lily-web", id: 1, port: 3456, mem: "62MB", desc: "Player chat API" }],
  },
  {
    name: "Spartak", role: "Global Communicator", emoji: "\u{1F30D}", status: "ready",
    telegram: null, accent: "#4ECDC4",
    directive: "Break every language barrier. Make the game speak everyone's mother tongue. Connect the world.",
    bio: "Arthur and Tamara's 4-week-old son. The youngest Palyan found his voice before he could speak. Translates the entire Level Up game into every language players need. " + CONFIG.totalScenarios + " total scenarios. Template covers " + CONFIG.templateReady + ". Dutch and Spanish UI started.",
    processName: "spartak-bot", processId: null, processPort: null, processMem: null,
  },
];

// ═══════════════════════════════════════════════════════
// CRON SCHEDULES - Real times, countdowns auto-calculate
// ═══════════════════════════════════════════════════════

const CRON_SCHEDULES = [
  { name: "Morning Brief", assignee: "Tamara", type: "daily", hour: 8, min: 0, status: "active", description: "Overnight activity, family accomplishments, calendar, one recommendation" },
  { name: "Evening Summary", assignee: "Tamara", type: "daily", hour: 20, min: 0, status: "active", description: "Day's results, calls booked, content created, tomorrow's priorities" },
  { name: "Inbox Check", assignee: "Lady", type: "interval", intervalHours: 2, status: "active", description: "Check email replies, route warm leads, flag bouncebacks" },
  { name: "Player Activity Digest", assignee: "Lily", type: "daily", hour: 21, min: 0, status: "active", description: "Breakthrough conversations, deep mode triggers, coaching candidates" },
  { name: "Credibility Scan", assignee: "Roman", type: "weekly", dayOfWeek: 1, hour: 10, min: 0, status: "active", description: "New press mentions, social engagement, testimonial opportunities" },
  { name: "Financial Checkpoint", assignee: "Tamara", type: "weekly", dayOfWeek: 5, hour: 18, min: 0, status: "active", description: "Burn rate, revenue, ROI per family member, runway update" },
  { name: "Translation Progress", assignee: "Spartak", type: "weekly", dayOfWeek: 0, hour: 18, min: 0, status: "pending", description: "Languages completed, scenarios translated, game update status" },
  { name: "Partnership Pipeline", assignee: "Kris", type: "weekly", dayOfWeek: 3, hour: 10, min: 0, status: "pending", description: "Win-win opportunities, music integration points, new bridges built" },
];

// ═══════════════════════════════════════════════════════
// AUTO-DERIVED (never edit below this line)
// ═══════════════════════════════════════════════════════

function getGreeting() {
  const h = new Date().getHours();
  if (h < 12) return "Good morning";
  if (h < 17) return "Good afternoon";
  return "Good evening";
}

function getNextRun(sched, now) {
  if (sched.type === "interval") {
    const mins = sched.intervalHours * 60;
    const elapsed = (now.getHours() * 60 + now.getMinutes()) % mins;
    return (mins - elapsed) * 60 * 1000;
  }
  let next = new Date(now);
  next.setSeconds(0, 0);
  if (sched.type === "daily") {
    next.setHours(sched.hour, sched.min);
    if (next <= now) next.setDate(next.getDate() + 1);
  } else if (sched.type === "weekly") {
    next.setHours(sched.hour, sched.min);
    let d = sched.dayOfWeek - now.getDay();
    if (d < 0 || (d === 0 && next <= now)) d += 7;
    next.setDate(next.getDate() + d);
  }
  return next - now;
}

function fmtCountdown(ms) {
  if (ms <= 0) return "now";
  const m = Math.floor(ms / 60000);
  const h = Math.floor(m / 60);
  if (h >= 24) return Math.floor(h / 24) + "d " + (h % 24) + "h";
  return h + "h " + String(m % 60).padStart(2, "0") + "m";
}

function useLiveCron() {
  const [now, setNow] = useState(new Date());
  useEffect(() => { const t = setInterval(() => setNow(new Date()), 30000); return () => clearInterval(t); }, []);
  return CRON_SCHEDULES.map(s => ({ ...s, nextIn: fmtCountdown(getNextRun(s, now)) }));
}

const derived = () => {
  const online = FAMILY.filter(m => m.status === "online").length;
  const ready = FAMILY.filter(m => m.status === "ready").length;
  const totalBurn = CONFIG.costs.reduce((a, c) => a + c.cost, 0);
  return { online, ready, totalBurn };
};

// ═══════════════════════════════════════════════════════
// COMPONENTS
// ═══════════════════════════════════════════════════════

function GlowDot({ color, size = 8, pulse = true }) {
  return (
    <span style={{ position: "relative", display: "inline-flex", alignItems: "center", justifyContent: "center" }}>
      {pulse && <span style={{ position: "absolute", width: size * 2.5, height: size * 2.5, borderRadius: "50%", background: color + "20", animation: "pulse 2s ease-in-out infinite" }} />}
      <span style={{ width: size, height: size, borderRadius: "50%", background: color, boxShadow: "0 0 " + size + "px " + color + "60", position: "relative", zIndex: 1 }} />
    </span>
  );
}

function MetricCard({ label, value, sub, accent }) {
  return (
    <div style={{ background: "linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%)", border: "1px solid rgba(255,255,255,0.06)", borderRadius: 20, padding: "22px 20px", position: "relative", overflow: "hidden" }}>
      <div style={{ position: "absolute", top: -10, right: -10, width: 80, height: 80, borderRadius: "50%", background: (accent || "#fff") + "06" }} />
      <div style={{ fontSize: 11, color: "#555", textTransform: "uppercase", letterSpacing: "0.1em", fontWeight: 600, marginBottom: 10, fontFamily: "var(--font-mono)" }}>{label}</div>
      <div style={{ fontSize: 32, fontWeight: 200, color: accent || "#fff", letterSpacing: "-0.03em", fontFamily: "var(--font-display)", lineHeight: 1 }}>{value}</div>
      {sub && <div style={{ fontSize: 12, color: "#555", marginTop: 6, fontFamily: "var(--font-body)" }}>{sub}</div>}
    </div>
  );
}

function PageHeader({ title, subtitle }) {
  return (
    <div style={{ marginBottom: 28 }}>
      <h1 style={{ fontFamily: "var(--font-display)", fontSize: 32, fontWeight: 200, color: "#fff", letterSpacing: "-0.03em", marginBottom: 4 }}>{title}</h1>
      {subtitle && <p style={{ fontFamily: "var(--font-body)", fontSize: 14, color: "#555" }}>{subtitle}</p>}
    </div>
  );
}

function SectionHeader({ title }) {
  return <div style={{ fontSize: 10, fontWeight: 700, color: "#444", textTransform: "uppercase", letterSpacing: "0.12em", marginBottom: 12, fontFamily: "var(--font-mono)" }}>{title}</div>;
}

function LiveClock() {
  const [now, setNow] = useState(new Date());
  useEffect(() => { const t = setInterval(() => setNow(new Date()), 1000); return () => clearInterval(t); }, []);
  return (
    <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
      <span style={{ fontSize: 13, color: "#555", fontFamily: "var(--font-mono)" }}>
        {now.toLocaleDateString("en-US", { weekday: "long", month: "long", day: "numeric", year: "numeric" })}
      </span>
      <span style={{ fontSize: 13, color: "#D4A574", fontFamily: "var(--font-mono)", fontWeight: 500 }}>
        {now.toLocaleTimeString("en-US", { hour: "2-digit", minute: "2-digit", second: "2-digit" })}
      </span>
    </div>
  );
}

function Sidebar({ active, onNav }) {
  const sections = [
    { id: "divider1", label: "OVERVIEW", type: "divider" },
    { id: "home", icon: "\u25C8", label: "Dashboard" },
    { id: "family", icon: "\u2661", label: "Family Roster" },
    { id: "divider2", label: "OPERATIONS", type: "divider" },
    { id: "cron", icon: "\u25F7", label: "Scheduled Jobs" },
    { id: "divider3", label: "SYSTEM", type: "divider" },
    { id: "financials", icon: "\u25C7", label: "Financials" },
    { id: "infrastructure", icon: "\u25CE", label: "Infrastructure" },
  ];
  const { online, ready } = derived();
  return (
    <div style={{ width: 240, minWidth: 240, height: "100vh", position: "fixed", left: 0, top: 0, zIndex: 100, background: "linear-gradient(180deg, rgba(12,12,12,0.98) 0%, rgba(6,6,6,0.99) 100%)", borderRight: "1px solid rgba(255,255,255,0.04)", display: "flex", flexDirection: "column", backdropFilter: "blur(40px)" }}>
      <div style={{ padding: "32px 24px 24px" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 4 }}>
          <div style={{ width: 32, height: 32, borderRadius: 10, background: "linear-gradient(135deg, #D4A574 0%, #B8845A 100%)", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 16, fontWeight: 700, color: "#fff" }}>P</div>
          <div>
            <div style={{ fontSize: 14, fontWeight: 600, color: "#D4A574", letterSpacing: "0.04em", fontFamily: "var(--font-display)" }}>PALYAN FAMILY</div>
            <div style={{ fontSize: 10, color: "#555", letterSpacing: "0.08em", fontFamily: "var(--font-mono)" }}>COMMAND CENTER</div>
          </div>
        </div>
      </div>
      <div style={{ padding: "0 12px", flex: 1, overflowY: "auto" }}>
        {sections.map((item) => {
          if (item.type === "divider") return <div key={item.id} style={{ fontSize: 9, fontWeight: 700, color: "#333", letterSpacing: "0.14em", padding: "16px 12px 6px", fontFamily: "var(--font-mono)" }}>{item.label}</div>;
          const isActive = active === item.id;
          return (
            <button key={item.id} onClick={() => onNav(item.id)} style={{ display: "flex", alignItems: "center", gap: 10, width: "100%", padding: "9px 12px", marginBottom: 1, border: "none", borderRadius: 10, cursor: "pointer", background: isActive ? "rgba(212,165,116,0.08)" : "transparent", color: isActive ? "#D4A574" : "#555", fontFamily: "var(--font-body)", fontSize: 13, fontWeight: isActive ? 500 : 400, textAlign: "left", transition: "all 0.2s" }}>
              <span style={{ fontSize: 14, width: 20, textAlign: "center", opacity: isActive ? 1 : 0.5 }}>{item.icon}</span>
              {item.label}
            </button>
          );
        })}
      </div>
      <div style={{ padding: "16px 20px", borderTop: "1px solid rgba(255,255,255,0.04)" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}>
          <GlowDot color="#34D399" size={6} />
          <span style={{ fontSize: 11, color: "#555", fontFamily: "var(--font-mono)" }}>{online} online</span>
        </div>
        {ready > 0 && <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}>
          <GlowDot color="#F59E0B" size={6} pulse={false} />
          <span style={{ fontSize: 11, color: "#555", fontFamily: "var(--font-mono)" }}>{ready} ready to deploy</span>
        </div>}
        <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
          <GlowDot color="#60A5FA" size={6} pulse={false} />
          <span style={{ fontSize: 11, color: "#555", fontFamily: "var(--font-mono)" }}>Max Proxy :3457</span>
        </div>
      </div>
    </div>
  );
}

// ═══════════════════════════════════════════════════════
// PAGES
// ═══════════════════════════════════════════════════════

function DashboardPage() {
  const d = derived();
  const cronJobs = useLiveCron();
  return (
    <div>
      <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: 36 }}>
        <div>
          <h1 style={{ fontFamily: "var(--font-display)", fontSize: 36, fontWeight: 200, color: "#fff", letterSpacing: "-0.03em", marginBottom: 4 }}>{getGreeting()}, Arthur</h1>
          <p style={{ fontFamily: "var(--font-body)", fontSize: 15, color: "#555" }}>Your family is {FAMILY.length} strong. {d.online} online, {d.ready} ready to deploy.</p>
        </div>
        <LiveClock />
      </div>

      <div style={{ display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: 14, marginBottom: 32 }}>
        <MetricCard label="Family Online" value={d.online + "/" + FAMILY.length} sub={d.ready > 0 ? d.ready + " ready to deploy" : "All deployed"} accent="#34D399" />
        <MetricCard label="Monthly Burn" value={"$" + d.totalBurn} sub={CONFIG.runwayMonths + " months runway"} accent="#EF4444" />
        <MetricCard label="Lifetime Revenue" value={"$" + CONFIG.lifetimeRevenue.toLocaleString()} sub={CONFIG.lifetimeClients + " clients"} accent="#60A5FA" />
        <MetricCard label="Scenarios" value={CONFIG.totalScenarios.toLocaleString()} sub={CONFIG.fullLanguages + " full languages translated"} accent="#4ECDC4" />
      </div>

      <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 20 }}>
        <div>
          <SectionHeader title="Family Status" />
          <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
            {FAMILY.map((m, i) => (
              <div key={i} style={{ background: "rgba(255,255,255,0.02)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 12, padding: "12px 16px", display: "flex", gap: 12, alignItems: "center" }}>
                <div style={{ width: 36, height: 36, borderRadius: 10, background: "linear-gradient(135deg, " + m.accent + "15 0%, " + m.accent + "05 100%)", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 18 }}>{m.emoji}</div>
                <div style={{ flex: 1 }}>
                  <div style={{ fontSize: 14, color: "#ddd", fontWeight: 500, fontFamily: "var(--font-body)" }}>{m.name}</div>
                  <div style={{ fontSize: 11, color: m.accent, fontFamily: "var(--font-body)" }}>{m.role}</div>
                </div>
                {m.telegram && <span style={{ fontSize: 10, color: "#444", fontFamily: "var(--font-mono)" }}>{m.telegram}</span>}
                <GlowDot color={m.status === "online" ? "#34D399" : m.status === "ready" ? "#F59E0B" : "#EF4444"} size={7} pulse={m.status === "online"} />
              </div>
            ))}
          </div>
        </div>
        <div>
          <SectionHeader title="Next Scheduled" />
          {cronJobs.filter(j => j.status === "active").map((job, i) => {
            const member = FAMILY.find(m => m.name === job.assignee);
            return (
              <div key={i} style={{ background: "rgba(255,255,255,0.02)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 12, padding: "12px 16px", display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 6 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
                  <span style={{ fontSize: 16 }}>{member?.emoji}</span>
                  <div>
                    <div style={{ fontSize: 13, color: "#ccc", fontFamily: "var(--font-body)" }}>{job.name}</div>
                    <div style={{ fontSize: 11, color: "#555", fontFamily: "var(--font-body)" }}>{job.assignee}</div>
                  </div>
                </div>
                <div style={{ fontSize: 13, color: "#60A5FA", fontFamily: "var(--font-mono)", fontWeight: 500, background: "rgba(96,165,250,0.08)", padding: "4px 12px", borderRadius: 6 }}>{job.nextIn}</div>
              </div>
            );
          })}
          <div style={{ marginTop: 20 }}>
            <SectionHeader title="Revenue Path" />
            <div style={{ background: "rgba(212,165,116,0.04)", border: "1px solid rgba(212,165,116,0.1)", borderRadius: 12, padding: "16px 18px" }}>
              <div style={{ fontSize: 13, color: "#aaa", fontFamily: "var(--font-body)", lineHeight: 1.6 }}>
                Game experience + credibility pipeline + time = revenue. Both paying clients followed the same pattern: played the game, watched Arthur grow, saw credibility build, then paid. Not ads. Not cold emails.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

function FamilyPage() {
  const [selected, setSelected] = useState(null);
  const sc = (s) => s === "online" ? "#34D399" : s === "ready" ? "#F59E0B" : "#EF4444";
  const sl = (s) => s === "online" ? "ONLINE" : s === "ready" ? "READY" : "OFFLINE";
  return (
    <div>
      <PageHeader title="Family Roster" subtitle={FAMILY.length + " Members"} />
      <div style={{ display: "grid", gridTemplateColumns: selected ? "340px 1fr" : "repeat(4, 1fr)", gap: 14 }}>
        {FAMILY.map((m) => (
          <button key={m.name} onClick={() => setSelected(selected?.name === m.name ? null : m)} style={{ background: selected?.name === m.name ? "linear-gradient(135deg, " + m.accent + "08 0%, transparent 100%)" : "rgba(255,255,255,0.015)", border: selected?.name === m.name ? "1px solid " + m.accent + "25" : "1px solid rgba(255,255,255,0.04)", borderRadius: 16, padding: selected ? "14px 16px" : "20px", cursor: "pointer", textAlign: "left", width: "100%", transition: "all 0.3s", position: "relative", overflow: "hidden" }}>
            {selected?.name === m.name && <div style={{ position: "absolute", top: 0, left: 0, right: 0, height: 2, background: "linear-gradient(90deg, transparent, " + m.accent + ", transparent)" }} />}
            <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: selected ? 6 : 14 }}>
              <div style={{ width: selected ? 36 : 48, height: selected ? 36 : 48, borderRadius: selected ? 10 : 14, background: "linear-gradient(135deg, " + m.accent + "15 0%, " + m.accent + "05 100%)", display: "flex", alignItems: "center", justifyContent: "center", fontSize: selected ? 18 : 24, transition: "all 0.3s" }}>{m.emoji}</div>
              <div style={{ flex: 1 }}>
                <div style={{ fontFamily: "var(--font-display)", fontSize: selected ? 14 : 17, fontWeight: 600, color: "#fff" }}>{m.name}</div>
                <div style={{ fontFamily: "var(--font-body)", fontSize: 11, color: m.accent, fontWeight: 500 }}>{m.role}</div>
              </div>
              <GlowDot color={sc(m.status)} size={7} pulse={m.status === "online"} />
            </div>
            {!selected && <div style={{ fontSize: 12, color: "#666", lineHeight: 1.5, fontFamily: "var(--font-body)" }}>{m.directive}</div>}
          </button>
        ))}
      </div>
      {selected && (
        <div style={{ position: "fixed", top: 0, right: 0, width: "calc(100% - 240px - 380px)", height: "100vh", background: "rgba(10,10,10,0.95)", backdropFilter: "blur(40px)", borderLeft: "1px solid rgba(255,255,255,0.04)", padding: "32px 36px", overflowY: "auto", animation: "slideIn 0.3s ease" }}>
          <div style={{ display: "flex", alignItems: "center", gap: 16, marginBottom: 28 }}>
            <div style={{ width: 64, height: 64, borderRadius: 18, background: "linear-gradient(135deg, " + selected.accent + "20 0%, " + selected.accent + "05 100%)", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 32, boxShadow: "0 0 40px " + selected.accent + "10" }}>{selected.emoji}</div>
            <div>
              <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
                <span style={{ fontFamily: "var(--font-display)", fontSize: 26, fontWeight: 500, color: "#fff" }}>{selected.name}</span>
                <span style={{ fontSize: 9, fontWeight: 700, color: sc(selected.status), background: sc(selected.status) + "15", padding: "3px 8px", borderRadius: 4, fontFamily: "var(--font-mono)", letterSpacing: "0.06em" }}>{sl(selected.status)}</span>
              </div>
              <div style={{ fontSize: 14, color: selected.accent, fontWeight: 500, fontFamily: "var(--font-body)" }}>{selected.role}</div>
              {selected.telegram && <div style={{ fontSize: 12, color: "#444", fontFamily: "var(--font-mono)", marginTop: 2 }}>{selected.telegram}</div>}
            </div>
          </div>
          <div style={{ marginBottom: 20 }}>
            <div style={{ fontSize: 10, fontWeight: 700, color: "#444", textTransform: "uppercase", letterSpacing: "0.12em", marginBottom: 8, fontFamily: "var(--font-mono)" }}>Mission Directive</div>
            <div style={{ fontSize: 14, color: "#ddd", lineHeight: 1.6, fontFamily: "var(--font-body)", padding: "12px 16px", background: selected.accent + "08", borderRadius: 10, borderLeft: "2px solid " + selected.accent + "30" }}>{selected.directive}</div>
          </div>
          <div style={{ marginBottom: 20 }}>
            <div style={{ fontSize: 10, fontWeight: 700, color: "#444", textTransform: "uppercase", letterSpacing: "0.12em", marginBottom: 8, fontFamily: "var(--font-mono)" }}>Bio</div>
            <div style={{ fontSize: 14, color: "#888", lineHeight: 1.6, fontFamily: "var(--font-body)" }}>{selected.bio}</div>
          </div>
          {selected.processId && (
            <div>
              <div style={{ fontSize: 10, fontWeight: 700, color: "#444", textTransform: "uppercase", letterSpacing: "0.12em", marginBottom: 8, fontFamily: "var(--font-mono)" }}>Process</div>
              <div style={{ display: "flex", gap: 10 }}>
                <div style={{ background: "rgba(255,255,255,0.03)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 10, padding: "10px 14px" }}>
                  <div style={{ fontSize: 16, fontWeight: 300, color: "#34D399", fontFamily: "var(--font-display)" }}>{selected.processName}</div>
                  <div style={{ fontSize: 10, color: "#555", fontFamily: "var(--font-mono)" }}>pm2 id {selected.processId}</div>
                </div>
                <div style={{ background: "rgba(255,255,255,0.03)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 10, padding: "10px 14px" }}>
                  <div style={{ fontSize: 16, fontWeight: 300, color: "#60A5FA", fontFamily: "var(--font-display)" }}>{selected.processMem}</div>
                  <div style={{ fontSize: 10, color: "#555", fontFamily: "var(--font-mono)" }}>memory</div>
                </div>
              </div>
            </div>
          )}
          {!selected.processId && (
            <div style={{ background: "rgba(245,158,11,0.06)", border: "1px solid rgba(245,158,11,0.12)", borderRadius: 10, padding: "12px 16px" }}>
              <span style={{ fontSize: 12, color: "#F59E0B", fontFamily: "var(--font-body)" }}>Waiting for deployment</span>
            </div>
          )}
        </div>
      )}
    </div>
  );
}

function CronPage() {
  const cronJobs = useLiveCron();
  return (
    <div>
      <PageHeader title="Scheduled Jobs" subtitle="Live countdowns" />
      <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 14 }}>
        {cronJobs.map((job, i) => {
          const member = FAMILY.find(m => m.name === job.assignee);
          const isPending = job.status === "pending";
          return (
            <div key={i} style={{ background: isPending ? "rgba(245,158,11,0.02)" : "rgba(255,255,255,0.02)", border: isPending ? "1px solid rgba(245,158,11,0.1)" : "1px solid rgba(255,255,255,0.04)", borderRadius: 16, padding: "20px", position: "relative", overflow: "hidden" }}>
              <div style={{ position: "absolute", top: 16, right: 16, background: isPending ? "rgba(245,158,11,0.08)" : "rgba(96,165,250,0.08)", border: isPending ? "1px solid rgba(245,158,11,0.15)" : "1px solid rgba(96,165,250,0.15)", borderRadius: 8, padding: "6px 12px" }}>
                <div style={{ fontSize: 9, color: isPending ? "#F59E0B" : "#60A5FA", textTransform: "uppercase", letterSpacing: "0.08em", fontFamily: "var(--font-mono)", fontWeight: 700 }}>{isPending ? "Pending" : "Next In"}</div>
                <div style={{ fontSize: 16, fontWeight: 400, color: isPending ? "#F59E0B" : "#60A5FA", fontFamily: "var(--font-mono)" }}>{job.nextIn}</div>
              </div>
              <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 10 }}>
                <GlowDot color={isPending ? "#F59E0B" : "#34D399"} size={6} pulse={!isPending} />
                <span style={{ fontSize: 15, fontWeight: 500, color: "#ddd", fontFamily: "var(--font-body)" }}>{job.name}</span>
              </div>
              <div style={{ fontSize: 13, color: "#777", fontFamily: "var(--font-body)", lineHeight: 1.5, marginBottom: 12, paddingRight: 100 }}>{job.description}</div>
              <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                <span style={{ fontSize: 14 }}>{member?.emoji}</span>
                <span style={{ fontSize: 12, color: member?.accent || "#666", fontFamily: "var(--font-body)" }}>{member?.name || job.assignee}</span>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

function FinancialsPage() {
  const totalBurn = CONFIG.costs.reduce((a, c) => a + c.cost, 0);
  const costsWithPct = CONFIG.costs.map(c => ({ ...c, pct: (c.cost / totalBurn) * 100 }));
  const totalCredits = CONFIG.apiCredits.anthropic + CONFIG.apiCredits.deepseek + CONFIG.apiCredits.openrouter;
  return (
    <div>
      <PageHeader title="Financials" subtitle="All numbers from CONFIG block" />
      <div style={{ display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: 14, marginBottom: 28 }}>
        <MetricCard label="Monthly Burn" value={"$" + totalBurn} accent="#EF4444" />
        <MetricCard label="Runway" value={CONFIG.runwayMonths + "mo"} sub="At current burn" accent="#F59E0B" />
        <MetricCard label="This Month" value={"$" + CONFIG.currentMonthRevenue} sub="Revenue" accent={CONFIG.currentMonthRevenue > 0 ? "#34D399" : "#666"} />
        <MetricCard label="Lifetime" value={"$" + CONFIG.lifetimeRevenue.toLocaleString()} sub={CONFIG.lifetimeClients + " clients"} accent="#34D399" />
      </div>
      <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 20 }}>
        <div style={{ background: "rgba(255,255,255,0.02)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 16, padding: 24 }}>
          <SectionHeader title="Cost Breakdown" />
          {costsWithPct.map((c, i) => (
            <div key={i} style={{ marginBottom: 16 }}>
              <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 6 }}>
                <span style={{ fontSize: 13, color: "#bbb", fontFamily: "var(--font-body)" }}>{c.item}</span>
                <span style={{ fontSize: 13, color: "#999", fontFamily: "var(--font-mono)" }}>${c.cost}/mo</span>
              </div>
              <div style={{ height: 4, background: "rgba(255,255,255,0.04)", borderRadius: 2, overflow: "hidden" }}>
                <div style={{ height: "100%", width: c.pct + "%", borderRadius: 2, background: "linear-gradient(90deg, #D4A574, " + (c.pct > 50 ? "#E8B4B8" : "#7DD3A8") + ")", transition: "width 1s ease" }} />
              </div>
            </div>
          ))}
          <div style={{ borderTop: "1px solid rgba(255,255,255,0.04)", paddingTop: 12, marginTop: 8, display: "flex", justifyContent: "space-between" }}>
            <span style={{ fontSize: 13, color: "#ddd", fontWeight: 500, fontFamily: "var(--font-body)" }}>Total</span>
            <span style={{ fontSize: 13, color: "#EF4444", fontWeight: 500, fontFamily: "var(--font-mono)" }}>${totalBurn}/mo</span>
          </div>
        </div>
        <div style={{ background: "rgba(255,255,255,0.02)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 16, padding: 24 }}>
          <SectionHeader title="API Credits (backup)" />
          <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: 10, marginBottom: 20 }}>
            {Object.entries(CONFIG.apiCredits).map(([name, val]) => (
              <div key={name} style={{ background: "rgba(255,255,255,0.03)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 10, padding: "12px 14px", textAlign: "center" }}>
                <div style={{ fontSize: 20, fontWeight: 200, color: val > 50 ? "#34D399" : val > 10 ? "#F59E0B" : "#EF4444", fontFamily: "var(--font-display)" }}>~${val}</div>
                <div style={{ fontSize: 10, color: "#555", textTransform: "capitalize", fontFamily: "var(--font-mono)", marginTop: 4 }}>{name}</div>
              </div>
            ))}
          </div>
          <div style={{ background: "rgba(96,165,250,0.06)", border: "1px solid rgba(96,165,250,0.1)", borderRadius: 10, padding: "12px 16px", textAlign: "center" }}>
            <div style={{ fontSize: 10, color: "#60A5FA", fontWeight: 600, fontFamily: "var(--font-mono)", marginBottom: 4 }}>TOTAL BACKUP</div>
            <div style={{ fontSize: 24, fontWeight: 200, color: "#60A5FA", fontFamily: "var(--font-display)" }}>~${totalCredits}</div>
            <div style={{ fontSize: 11, color: "#555", fontFamily: "var(--font-body)", marginTop: 4 }}>Saved by Max proxy</div>
          </div>
        </div>
      </div>
    </div>
  );
}

function InfrastructurePage() {
  const procs = [];
  procs.push({ name: "max-proxy", id: 3, port: 3457, mem: "65MB", status: "online", desc: "Claude Max API proxy" });
  FAMILY.forEach(m => {
    if (m.extraProcesses) m.extraProcesses.forEach(p => procs.push({ ...p, status: "online" }));
    if (m.processId) procs.push({ name: m.processName, id: m.processId, port: m.processPort, mem: m.processMem, status: "online", desc: m.role });
  });
  const pending = FAMILY.filter(m => !m.processId && m.processName);
  const totalMem = procs.reduce((a, p) => a + parseInt(p.mem || "0"), 0);
  return (
    <div>
      <PageHeader title="Infrastructure" subtitle="Auto-built from family data" />
      <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 14, marginBottom: 24 }}>
        <MetricCard label="VPS" value={CONFIG.vpsRAM + " RAM"} sub={CONFIG.vpsIP + " \u00B7 " + totalMem + "MB used"} accent="#60A5FA" />
        <MetricCard label="AI Engine" value="Max 20x" sub="Claude Code OAuth \u00B7 $200/mo flat" accent="#D4A574" />
        <MetricCard label="Processes" value={procs.length} sub={procs.length + " live" + (pending.length > 0 ? " \u00B7 " + pending.length + " pending" : "")} accent="#34D399" />
      </div>
      <div style={{ background: "rgba(255,255,255,0.02)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 16, padding: 24, marginBottom: 16 }}>
        <SectionHeader title="PM2 Processes" />
        <div style={{ display: "grid", gridTemplateColumns: "40px 140px 1fr 70px 60px 60px", gap: 0, fontSize: 10, color: "#444", fontFamily: "var(--font-mono)", fontWeight: 700, textTransform: "uppercase", letterSpacing: "0.08em", paddingBottom: 8, borderBottom: "1px solid rgba(255,255,255,0.04)", marginBottom: 4 }}>
          <span>ID</span><span>Name</span><span>Role</span><span>Port</span><span>Mem</span><span>Status</span>
        </div>
        {procs.map((p, i) => (
          <div key={i} style={{ display: "grid", gridTemplateColumns: "40px 140px 1fr 70px 60px 60px", padding: "10px 0", borderBottom: i < procs.length - 1 ? "1px solid rgba(255,255,255,0.02)" : "none", alignItems: "center" }}>
            <span style={{ fontSize: 12, color: "#555", fontFamily: "var(--font-mono)" }}>{p.id}</span>
            <span style={{ fontSize: 13, color: "#ccc", fontFamily: "var(--font-mono)", fontWeight: 500 }}>{p.name}</span>
            <span style={{ fontSize: 12, color: "#666", fontFamily: "var(--font-body)" }}>{p.desc}</span>
            <span style={{ fontSize: 12, color: p.port ? "#60A5FA" : "#333", fontFamily: "var(--font-mono)" }}>{p.port ? ":" + p.port : "\u2014"}</span>
            <span style={{ fontSize: 12, color: "#888", fontFamily: "var(--font-mono)" }}>{p.mem}</span>
            <div style={{ display: "flex", alignItems: "center", gap: 6 }}>
              <GlowDot color="#34D399" size={5} pulse={false} />
              <span style={{ fontSize: 11, color: "#34D399", fontFamily: "var(--font-mono)" }}>online</span>
            </div>
          </div>
        ))}
      </div>
      {pending.length > 0 && <div style={{ background: "rgba(245,158,11,0.02)", border: "1px solid rgba(245,158,11,0.08)", borderRadius: 16, padding: 24, marginBottom: 16 }}>
        <SectionHeader title="Pending" />
        {pending.map((m, i) => (
          <div key={i} style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "12px 0" }}>
            <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
              <span style={{ fontSize: 18 }}>{m.emoji}</span>
              <span style={{ fontSize: 13, color: "#ccc", fontFamily: "var(--font-mono)", fontWeight: 500 }}>{m.processName}</span>
              <span style={{ fontSize: 12, color: "#666", fontFamily: "var(--font-body)" }}>{m.role}</span>
            </div>
            <span style={{ fontSize: 9, fontWeight: 700, color: "#F59E0B", background: "rgba(245,158,11,0.1)", padding: "3px 8px", borderRadius: 4, fontFamily: "var(--font-mono)", textTransform: "uppercase" }}>Needs Token</span>
          </div>
        ))}
      </div>}
      <div style={{ background: "rgba(255,255,255,0.02)", border: "1px solid rgba(255,255,255,0.04)", borderRadius: 16, padding: 24 }}>
        <SectionHeader title="Architecture" />
        <div style={{ fontSize: 14, color: "#888", fontFamily: "var(--font-mono)", lineHeight: 2.2, textAlign: "center", padding: "20px 0" }}>
          <span style={{ color: "#C4A8E8" }}>Telegram Users</span>
          <span style={{ color: "#444" }}> {"\u2192"} </span>
          <span style={{ color: "#7DD3A8" }}>Family Bots (pm2)</span>
          <span style={{ color: "#444" }}> {"\u2192"} </span>
          <span style={{ color: "#60A5FA" }}>Max Proxy (:3457)</span>
          <span style={{ color: "#444" }}> {"\u2192"} </span>
          <span style={{ color: "#D4A574" }}>Claude Code CLI</span>
          <span style={{ color: "#444" }}> {"\u2192"} </span>
          <span style={{ color: "#E8B4B8" }}>Anthropic (Max Sub)</span>
          <br />
          <span style={{ color: "#93A8E8" }}>100levelup.com</span>
          <span style={{ color: "#444" }}> {"\u2192"} </span>
          <span style={{ color: "#7DD3A8" }}>Caddy</span>
          <span style={{ color: "#444" }}> {"\u2192"} </span>
          <span style={{ color: "#C4A8E8" }}>lily-web (:3456)</span>
          <span style={{ color: "#444" }}> {"\u2192"} </span>
          <span style={{ color: "#60A5FA" }}>Max Proxy</span>
          <span style={{ color: "#444" }}> {"\u2192"} </span>
          <span style={{ color: "#D4A574" }}>$0 per token</span>
        </div>
      </div>
    </div>
  );
}

// ═══════════════════════════════════════════════════════
// APP
// ═══════════════════════════════════════════════════════

function App() {
  const [page, setPage] = useState("home");
  const pages = { home: <DashboardPage />, family: <FamilyPage />, cron: <CronPage />, financials: <FinancialsPage />, infrastructure: <InfrastructurePage /> };
  return (
    <div style={{ minHeight: "100vh", background: "#080808", color: "#fff" }}>
      <style>{`
        :root { --font-display: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; --font-body: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; --font-mono: 'SF Mono', 'Fira Code', 'Cascadia Code', 'JetBrains Mono', monospace; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.4; } 50% { transform: scale(1.8); opacity: 0; } }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        button { font-family: inherit; } button:hover { filter: brightness(1.1); }
        ::-webkit-scrollbar { width: 5px; } ::-webkit-scrollbar-track { background: transparent; } ::-webkit-scrollbar-thumb { background: #1a1a1a; border-radius: 3px; }
      `}</style>
      <Sidebar active={page} onNav={setPage} />
      <div style={{ marginLeft: 240, padding: "32px 44px", minHeight: "100vh", background: "radial-gradient(ellipse at 50% 0%, rgba(212,165,116,0.02) 0%, transparent 60%)" }}>
        <div key={page} style={{ animation: "fadeUp 0.3s ease", maxWidth: 1060 }}>
          {pages[page]}
        </div>
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
